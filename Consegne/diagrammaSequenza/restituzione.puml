@startuml
actor App
participant Biblioteca
participant Prestito
participant Libro
participant Utente

App -> Biblioteca : registraRestituzione(isbn, matricola)

' Ricerca prestito attivo
Biblioteca -> Biblioteca : trovaPrestitoAttivo(isbn, matricola)
Biblioteca --> Biblioteca : prestito

alt prestito non trovato
    Biblioteca --> App : false
    return
end

' Registrazione della restituzione
Biblioteca -> Prestito : registraRestituzione()
activate Prestito
Prestito --> Biblioteca : ok
deactivate Prestito

' Aggiornamento stato
Biblioteca -> Biblioteca : aggiornaCopiaDisponibile(libro)

Biblioteca --> App : true
@enduml
